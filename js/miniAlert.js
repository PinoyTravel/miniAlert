// Generated by CoffeeScript 1.3.3
(function() {

  jQuery(function() {
    $.miniAlert = function(element, options) {
      var init, removeElement, setState,
        _this = this;
      this.defaults = {
        text: 'x',
        cssClass: 'close',
        position: 'before',
        effect: 'basic',
        duration: 100,
        onLoad: function() {},
        onHide: function() {},
        onHidden: function() {}
      };
      this.state = '';
      this.settings = {};
      this.$element = $(element);
      setState = function(state) {
        this.state = state;
      };
      this.getState = function() {
        return state;
      };
      this.getSetting = function(settingKey) {
        return this.settings[settingKey];
      };
      this.callSettingFunction = function(functionName, args) {
        if (args == null) {
          args = [this.$element, this.$button];
        }
        return this.settings[functionName].apply(this, args);
      };
      removeElement = function() {
        _this.$element.remove();
        return _this.callSettingFunction('onHidden', []);
      };
      init = function() {
        _this.settings = $.extend({}, _this.defaults, options);
        _this.$button = $('<button />', {
          "class": _this.settings.cssClass,
          text: _this.settings.text
        });
        if (_this.settings.position === 'after') {
          _this.$button.appendTo(_this.$element);
        } else {
          _this.$button.prependTo(_this.$element);
        }
        _this.$button.bind('click', function(e) {
          _this.callSettingFunction('onHide');
          e.preventDefault();
          if (_this.settings.effect === 'fade') {
            return _this.$element.fadeOut(_this.settings.duration, removeElement);
          } else if (_this.settings.effect === 'slide') {
            return _this.$element.slideUp(_this.settings.duration, removeElement);
          } else {
            return removeElement();
          }
        });
        return _this.callSettingFunction('onLoad');
      };
      init();
      return this;
    };
    return $.fn.miniAlert = function(options) {
      return this.each(function() {
        var plugin;
        if (void 0 === ($(this)).data('miniAlert')) {
          plugin = new $.miniAlert(this, options);
          return ($(this)).data('miniAlert', plugin);
        }
      });
    };
  });

}).call(this);
